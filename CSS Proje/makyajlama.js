
// Ã‡eviri nesneleri
const translations = {
    tr: {
        up_btn: "YukarÄ± Ã‡Ä±k",
        home_side1: "Gelecek HazÄ±r, <br> SÄ±ra Sende!",
        home_side2: "Sanal GerÃ§ekliÄŸin DÃ¼nyasÄ±",
        about_title: "Zeynep Eflatun",
        about_desc: "Ã–ÄŸrenci - Marmara Ãœniversitesi | Stajyer â€“ SOCRadar",
        about_btn: "Projelere Git",
        nav_home: "Ana Sayfa",
        nav_about: "HakkÄ±mda",
        nav_projects: "Projeler",
        nav_ability: "Yetenekler",
        nav_contact: "Ä°letiÅŸim",
        projects_title: "Projeler",
        project1_title: "Yapay ZekÃ¢",
        project1_desc: "BilgisayarlarÄ±n insanlar gibi dÃ¼ÅŸÃ¼nmesini, Ã¶ÄŸrenmesini ve karar vermesini saÄŸlayan teknolojidir. GÃ¼nÃ¼mÃ¼zde saÄŸlÄ±k, ulaÅŸÄ±m ve gÃ¼venlik alanlarÄ±nda yaygÄ±n olarak kullanÄ±lmaktadÄ±r.",
        project2_title: "Internet of Things",
        project2_desc: "CihazlarÄ±n internet aracÄ±lÄ±ÄŸÄ±yla birbirine baÄŸlanarak veri alÄ±ÅŸveriÅŸi yapmasÄ±nÄ± saÄŸlar. AkÄ±llÄ± ev sistemlerinden sanayiye kadar birÃ§ok alanda otomasyon saÄŸlar.",
        project3_title: "Sanal GerÃ§eklik",
        project3_desc: "KullanÄ±cÄ±yÄ± dijital bir dÃ¼nyaya taÅŸÄ±yan, gerÃ§ekÃ§i gÃ¶rsel ve iÅŸitsel deneyim sunan teknolojidir. EÄŸitim, oyun ve simÃ¼lasyonlarda sÄ±kÃ§a kullanÄ±lÄ±r.",
        project4_title: "Harici Ã‡alÄ±ÅŸmalar",
        project4_desc: "DiÄŸer projelerimiz hakkÄ±nda detaylÄ± bilgi almak, iÅŸ birliÄŸi yapmak veya Ã¶nerilerinizi paylaÅŸmak isterseniz bizimle iletiÅŸime geÃ§mekten Ã§ekinmeyin.",
        abilities_title: "Yetenekler",
        ability1_title: "Programlama Dilleri",
        ability1_item1: "JavaScript",
        ability2_title: "Web Teknolojileri",
        ability2_item1: "HTML",
        ability2_item2: "CSS",
        ability2_item3: "VS Code",
        ability3_title: "YabancÄ± Diller",
        ability3_item1: "TÃ¼rkÃ§e",
        ability3_item2: "Ä°ngilizce",
        ability3_item3: "Almanca",
        contact_mail: "zeynepeflatunn@gmail.com",
        contact_location: "Ä°stanbul, TÃ¼rkiye",
        contact_name_placeholder: "AdÄ±nÄ±z",
        contact_email_placeholder: "E-posta Adresiniz",
        contact_message_placeholder: "MesajÄ±nÄ±z",
        contact_btn: "GÃ¶nder"
    },
    en: {
        up_btn: "Scroll to Top",
        home_side1: "The Future is Ready, <br> It's Your Turn!",
        home_side2: "The World of Virtual Reality",
        about_title: "Zeynep Eflatun",
        about_desc: "Student - Marmara University | Intern â€“ SOCRadar",
        about_btn: "Go to Projects",
        nav_home: "Home",
        nav_about: "About",
        nav_projects: "Projects",
        nav_ability: "Skills",
        nav_contact: "Contact",
        projects_title: "Projects",
        project1_title: "Artificial Intelligence",
        project1_desc: "Technology that enables computers to think, learn, and make decisions like humans. Widely used in healthcare, transportation, and security.",
        project2_title: "Internet of Things",
        project2_desc: "Allows devices to connect and exchange data via the internet. Provides automation in many areas from smart homes to industry.",
        project3_title: "Virtual Reality",
        project3_desc: "Technology that immerses users in a digital world with realistic visual and audio experiences. Commonly used in education, gaming, and simulations.",
        project4_title: "Other Works",
        project4_desc: "For more information about our other projects, to collaborate, or to share your suggestions, feel free to contact us.",
        abilities_title: "Skills",
        ability1_title: "Programming Languages",
        ability1_item1: "JavaScript",
        ability2_title: "Web Technologies",
        ability2_item1: "HTML",
        ability2_item2: "CSS",
        ability2_item3: "VS Code",
        ability3_title: "Languages",
        ability3_item1: "Turkish",
        ability3_item2: "English",
        ability3_item3: "German",
        contact_mail: "zeynepeflatunn@gmail.com",
        contact_location: "Istanbul, Turkey",
        contact_name_placeholder: "Your Name",
        contact_email_placeholder: "Your Email",
        contact_message_placeholder: "Your Message",
        contact_btn: "Send"
    },
    de: {
        up_btn: "Nach oben scrollen",
        home_side1: "Die Zukunft ist bereit, <br> Du bist dran!",
        home_side2: "Die Welt der virtuellen RealitÃ¤t",
        about_title: "Zeynep Eflatun",
        about_desc: "Studentin - Marmara UniversitÃ¤t | Praktikantin â€“ SOCRadar",
        about_btn: "Zu den Projekten",
        nav_home: "Startseite",
        nav_about: "Ãœber mich",
        nav_projects: "Projekte",
        nav_ability: "FÃ¤higkeiten",
        nav_contact: "Kontakt",
        projects_title: "Projekte",
        project1_title: "KÃ¼nstliche Intelligenz",
        project1_desc: "Technologie, die es Computern ermÃ¶glicht, wie Menschen zu denken, zu lernen und Entscheidungen zu treffen. Weit verbreitet in Gesundheit, Verkehr und Sicherheit.",
        project2_title: "Internet der Dinge",
        project2_desc: "ErmÃ¶glicht GerÃ¤ten, sich Ã¼ber das Internet zu verbinden und Daten auszutauschen. Bietet Automatisierung in vielen Bereichen, von Smart Homes bis zur Industrie.",
        project3_title: "Virtuelle RealitÃ¤t",
        project3_desc: "Technologie, die Benutzer in eine digitale Welt mit realistischen visuellen und akustischen Erlebnissen eintauchen lÃ¤sst. HÃ¤ufig in Bildung, Spielen und Simulationen verwendet.",
        project4_title: "Weitere Arbeiten",
        project4_desc: "FÃ¼r weitere Informationen zu unseren anderen Projekten, zur Zusammenarbeit oder um VorschlÃ¤ge zu teilen, kontaktieren Sie uns gerne.",
        abilities_title: "FÃ¤higkeiten",
        ability1_title: "Programmiersprachen",
        ability1_item1: "JavaScript",
        ability2_title: "Webtechnologien",
        ability2_item1: "HTML",
        ability2_item2: "CSS",
        ability2_item3: "VS Code",
        ability3_title: "Sprachen",
        ability3_item1: "TÃ¼rkisch",
        ability3_item2: "Englisch",
        ability3_item3: "Deutsch",
        contact_mail: "zeynepeflatunn@gmail.com",
        contact_location: "Istanbul, TÃ¼rkei",
        contact_name_placeholder: "Ihr Name",
        contact_email_placeholder: "Ihre E-Mail-Adresse",
        contact_message_placeholder: "Ihre Nachricht",
        contact_btn: "Senden"
    }
};

function ensureCustomScrollBtnExists() {
    let btn = document.getElementById('customScrollTopBtn');
    if (!btn) {
        btn = document.createElement('div');
        btn.id = 'customScrollTopBtn';
        btn.style.display = 'none';
        document.body.appendChild(btn);
    }
    return btn;
}

// Modern, saÄŸ altta, dil seÃ§imine gÃ¶re metinli
function updateCustomScrollBtnText() {
    const btn = ensureCustomScrollBtnExists();
    let lang = localStorage.getItem('lang') || 'tr';
    const t = translations[lang] || translations['tr'];
    btn.innerHTML = `<span style="font-size:1.5rem;vertical-align:middle;">ğŸ •</span>`;
    // btn.innerHTML = `<span style="font-size:1.5rem;vertical-align:middle;">ğŸ •</span> <span style="font-size:1.1rem;vertical-align:middle;">${t.up_btn}</span>`;
    // btn.title = t.up_btn;
}

// Butonun stillerini ekle
function addCustomScrollBtnStyle() {
    const style = document.createElement('style');
    style.innerHTML = `
    #customScrollTopBtn {
        position: fixed;
        bottom: 28px;
        right: 28px;
        background: #222;
        color: #fff;
        border-radius: 32px;
        box-shadow: 0 2px 16px 0 rgba(0,0,0,0.18);
        padding: 0.7rem 1.5rem 0.7rem 1.1rem;
        font-weight: bold;
        font-family: inherit;
        cursor: pointer;
        z-index: 9999;
        border: none;
        outline: none;
        display: flex;
        align-items: center;
        gap: 0.7rem;
        transition: background 0.2s, box-shadow 0.2s, transform 0.2s;
        opacity: 0.92;
    }
    #customScrollTopBtn:hover {
        background: #000;
        box-shadow: 0 4px 24px 0 #6200ff;
        transform: scale(1.06);
        opacity: 1;
    }
    @media (max-width: 600px) {
        #customScrollTopBtn {
            right: 10px;
            bottom: 10px;
            padding: 0.5rem 1rem 0.5rem 0.7rem;
            font-size: 0.95rem;
        }
    }
    `;
    document.head.appendChild(style);
}

// Scroll eventini ve tÄ±klama eventini ayarla
function setupCustomScrollBtn() {
    const btn = ensureCustomScrollBtnExists();
    window.addEventListener('scroll', function() {
        if (window.scrollY > 200) {
            btn.style.display = 'flex';
            updateCustomScrollBtnText(); // Her scroll'da da gÃ¼ncelle
        } else {
            btn.style.display = 'none';
        }
    });
    btn.onclick = function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };
}

// Sayfa yÃ¼klendiÄŸinde butonu hazÄ±rla
window.addEventListener('DOMContentLoaded', function() {
    addCustomScrollBtnStyle();
    ensureCustomScrollBtnExists();
    // EÄŸer localStorage'da dil yoksa varsayÄ±lan olarak TÃ¼rkÃ§e'yi seÃ§
    let lang = localStorage.getItem('lang');
    if (!lang) {
        lang = 'tr';
        localStorage.setItem('lang', lang);
    }
    setLanguage(lang);
    setupCustomScrollBtn();
});

// Dil deÄŸiÅŸtirme fonksiyonu
function setLanguage(lang) {
    localStorage.setItem('lang', lang); // SeÃ§ilen dili kaydet
    const t = translations[lang] || translations['tr'];
    // Navbar
    document.querySelector('[data-key="nav_home"]').textContent = t.nav_home;
    document.querySelector('[data-key="nav_about"]').textContent = t.nav_about;
    document.querySelector('[data-key="nav_projects"]').textContent = t.nav_projects;
    document.querySelector('[data-key="nav_ability"]').textContent = t.nav_ability;
    document.querySelector('[data-key="nav_contact"]').textContent = t.nav_contact;
    // Home
    document.querySelector('[data-key="about_title"]').textContent = t.about_title;
    document.querySelector('[data-key="about_desc"]').textContent = t.about_desc;
    document.querySelector('[data-key="about_btn"]').textContent = t.about_btn;
    document.querySelector('[data-key="home_side1"]').innerHTML = t.home_side1;
    document.querySelector('[data-key="home_side2"]').innerHTML = t.home_side2;
    // Projeler
    document.querySelector('[data-key="projects_title"]').textContent = t.projects_title;
    document.querySelector('[data-key="project1_title"]').textContent = t.project1_title;
    document.querySelector('[data-key="project1_desc"]').textContent = t.project1_desc;
    document.querySelector('[data-key="project2_title"]').textContent = t.project2_title;
    document.querySelector('[data-key="project2_desc"]').textContent = t.project2_desc;
    document.querySelector('[data-key="project3_title"]').textContent = t.project3_title;
    document.querySelector('[data-key="project3_desc"]').textContent = t.project3_desc;
    document.querySelector('[data-key="project4_title"]').textContent = t.project4_title;
    document.querySelector('[data-key="project4_desc"]').textContent = t.project4_desc;
    // Yetenekler
    document.querySelector('[data-key="abilities_title"]').textContent = t.abilities_title;
    document.querySelector('[data-key="ability1_title"]').textContent = t.ability1_title;
    document.querySelector('[data-key="ability1_item1"]').textContent = t.ability1_item1;
    document.querySelector('[data-key="ability2_title"]').textContent = t.ability2_title;
    document.querySelector('[data-key="ability2_item1"]').textContent = t.ability2_item1;
    document.querySelector('[data-key="ability2_item2"]').textContent = t.ability2_item2;
    document.querySelector('[data-key="ability2_item3"]').textContent = t.ability2_item3;
    document.querySelector('[data-key="ability3_title"]').textContent = t.ability3_title;
    document.querySelector('[data-key="ability3_item1"]').textContent = t.ability3_item1;
    document.querySelector('[data-key="ability3_item2"]').textContent = t.ability3_item2;
    document.querySelector('[data-key="ability3_item3"]').textContent = t.ability3_item3;
    // Ä°letiÅŸim
    document.querySelector('[data-key="contact_mail"]').textContent = t.contact_mail;
    document.querySelector('[data-key="contact_location"]').textContent = t.contact_location;
    document.getElementById('name').placeholder = t.contact_name_placeholder;
    document.getElementById('email').placeholder = t.contact_email_placeholder;
    document.getElementById('message').placeholder = t.contact_message_placeholder;
    //document.querySelector('.gÃ¶nder').textContent = t.contact_btn;
    // Button
    updateCustomScrollBtnText();
}

// Alertin manuel olarak istenilen dile atanmasÄ±, burada ingilizce seÃ§ildi ama if fonksiyonu ile detaylandÄ±rma yapÄ±labilir.
// Bunun iÃ§in input kÄ±smÄ±na oninvalid="InvalidMsg(this)" yazÄ±lÄ±r ve sonrasÄ±nda js kÄ±smÄ±ndan bu kod Ã§aÄŸrÄ±lÄ±r.
// alert browser'Ä±n diline gÃ¶re atama yapar, bilahare bir title atamasÄ± vs yapÄ±lmaz, o zaman if fonksiyonu kullanÄ±lÄ±r Ã§Ã¼nkÃ¼
// function InvalidMsg(input_text) {
//     input_text.setCustomValidity("Please enter your name");
//     return true;
// }

// Sayfa ilk yÃ¼klendiÄŸinde butonun title'Ä± doÄŸru dilde olsun
// Dil deÄŸiÅŸtiÄŸinde butonun metnini gÃ¼ncelle
const _orjSetLanguage = setLanguage;
setLanguage = function(lang) {
    localStorage.setItem('lang', lang);
    _orjSetLanguage.call(this, lang);
    updateCustomScrollBtnText();
};

// Bayraklara tÄ±klama
const flags = document.querySelectorAll('.flag img');
flags.forEach(flag => {
    flag.addEventListener('click', function (e) {
        e.preventDefault();
        if (this.alt === 'TÃ¼rkÃ§e') setLanguage('tr');
        else if (this.alt === 'English') setLanguage('en');
        else if (this.alt === 'Deutsch') setLanguage('de');
    });
});

// Tema toggle fonksiyonu
const themeToggle = document.getElementById('theme-toggle');
const body = document.body;
// Sayfa yÃ¼klendiÄŸinde localStorage'dan tema kontrolÃ¼
if (localStorage.getItem('theme') === 'dark') {
    body.classList.add('theme-dark');
    themeToggle.checked = true;
}
themeToggle.addEventListener('change', function () {
    if (this.checked) {
        body.classList.add('theme-dark');
        localStorage.setItem('theme', 'dark');
    } else {
        body.classList.remove('theme-dark');
        localStorage.setItem('theme', 'light');
    }
});

const contactForm = document.getElementById('contactForm');
const successDiv = document.getElementById('form-success-message');
if (contactForm) {
    contactForm.addEventListener('submit', async function (e) {
        e.preventDefault();
        const name = contactForm.querySelector('input[name="name"]').value.trim();
        const email = contactForm.querySelector('input[name="email"]').value.trim();
        const message = contactForm.querySelector('textarea[name="message"]').value.trim();
        if (!name || !email || !message) {
            successDiv.innerHTML = '<span style="color:red;font-weight:bold;">LÃ¼tfen tÃ¼m alanlarÄ± doldurun.</span>';
            successDiv.style.display = 'block';
            setTimeout(() => { successDiv.style.display = 'none'; }, 3000);
            return;
        }
        const formData = new FormData(contactForm);
        const response = await fetch(contactForm.action, {
            method: 'POST',
            body: formData
        });
        });
    }
